<!DOCTYPE html>
<html lang="en">
<head>
    <title>NL4DV | Docs</title>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Natural Language toolkit for Data Visualization">
    <meta name="author" content="Arpit Narechania">
    <link rel="shortcut icon" href="./assets/images/favicon.ico">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!-- FontAwesome JS -->
    <script defer src="./assets/fontawesome/js/all.js"></script>
    <!-- Global CSS -->
    <link rel="stylesheet" href="./assets/plugins/bootstrap/css/bootstrap.min.css">
    <!-- Plugins CSS -->
    <link rel="stylesheet" href="./assets/plugins/elegant_font/css/style.css">
    <link rel="stylesheet" href="./assets/plugins/prism/prism.css">
    <!-- Theme CSS -->
    <link id="theme-style" rel="stylesheet" href="./assets/css/styles.css">
    <!-- Custom CSS -->
    <link id="custom-style" rel="stylesheet" href="./assets/css/custom.css">

</head>


<body class="body-primary">
    <div class="page-wrapper">

        <!-- ******Header****** -->
        <header id="header" class="header">
            <div class="container">
                <div class="branding">
                    <h1 class="logo">
                        <a href="index.html">
                            <span class="text-highlight">NL4DV</span>
                            <!--<span class="text-bold">Docs</span>-->
                        </a>
                    </h1>
                </div><!--//branding-->
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                    <li class="breadcrumb-item active">Documentation</li>
                </ol>
                <div class="top-search-box cta-container">
                    <a class="btn btn-primary btn-cta" href="https://github.com/nl4dv/nl4dv" target="_blank"><i class="fab fa-github"></i> View on GitHub</a>
                    <a class="btn btn-primary btn-cta m-xs" href="https://www.cc.gatech.edu/~anarechania3/docs/publications/nl4dv_vis_2020.pdf" target="_blank" download><i class="fas fa-file-pdf"></i> Download Research Paper</a>
                </div>
            </div><!--//container-->
        </header><!--//header-->

        <div class="doc-wrapper">
            <div class="container">
                <div id="doc-header" class="doc-header text-center">
                    <h1 class="doc-title"><i class="icon icon_document_alt"></i> Documentation</h1>
                </div><!--//doc-header-->
                <div class="doc-body row">
                    <div class="doc-content col-md-9 col-12 order-1">
                        <div class="content-inner">
                            <section id="setup" class="doc-section">
                                <h2 class="section-title">Setup</h2>
                                <div id="prerequisites" class="section-block">
                                    <h3 class="block-title">Prerequisites</h3>
                                    <ol class="list">
                                        <li>
                                            <p>NL4DV is written in <a href="https://www.python.org/doc/versions/" target="_blank">Python 3</a>. Please ensure you have a Python 3 environment already installed.</p>
                                        </li>
                                        <li>
                                            <p>Install <a href="https://www.nltk.org" target="_blank">nltk</a> and the <b>popular</b> nltk artifacts.</p>
                                            <p><code class="language-bash">pip install -U nltk</code></p>
                                            <p><code class="language-bash">python -m nltk.downloader popular</code></p>
                                        </li>
                                        <li>
                                            <p>NL4DV requires a Dependency Parser module to parse the query. You can choose to install one (or all) of:</p>
                                            <ul>
                                                <li>
                                                    <p><a href="https://spacy.io/" target="_blank">Spacy</a>: install a sample <b>English model</b>.</p>
                                                    <p><code class="language-bash">pip install spacy</code></p>
                                                    <p><code class="language-bash">python -m spacy download en_core_web_sm</code></p>
                                                </li>
                                                <li>
                                                    <p><a href="https://stanfordnlp.github.io/CoreNLP/" target="_blank">Stanford CoreNLP</a> (<b>DEPRECATED</b>, seems slower too):</p>
                                                    <ul>
                                                        <li>
                                                            <p><a href="https://nlp.stanford.edu/software/stanford-english-corenlp-2018-10-05-models.jar" target="_blank">Download</a> the <b>English</b> model of Stanford CoreNLP version <b>3.9.2</b> and copy it to `examples/assets/jars/` or a known location.</p>
                                                        </li>
                                                        <li>
                                                            <p><a href="https://nlp.stanford.edu/software/stanford-parser-full-2018-10-17.zip" target="_blank">Download</a> the Stanford Parser version <b>3.9.2</b> and after unzipping the folder, copy the `stanford-parser.jar` file to `examples/assets/jars/` or a known location.</p>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li>
                                                    <p><a href="https://stanfordnlp.github.io/CoreNLP/" target="_blank">Stanford CoreNLPServer</a> (<b>RECOMMENDED</b>):</p>
                                                    <ul>
                                                        <li>
                                                            <p><a href="http://nlp.stanford.edu/software/stanford-corenlp-latest.zip" target="_blank">Download</a> and copy `stanford-corenlp-*.jar` and `stanford-corenlp-*-models.jar` contents to `examples/assets/jars/` or a known location.</p>
                                                        </li>
                                                        <li>
                                                            <p>Start the server (You will require <a href="https://www.oracle.com/java/technologies/javase-downloads.html" target="_blank">JAVA</a> installed). It will run on `http://localhost:9000`.</p>
                                                            <p><code class="language-bash">java -mx4g -cp "*" edu.stanford.nlp.pipeline.StanfordCoreNLPServer -annotators "tokenize,ssplit,pos,lemma,parse,sentiment" -port 9000 -timeout 30000</code></p>
                                                        </li>
                                                    </ul>
                                                </li>
                                            </ul>
                                        </li>
                                    </ol>
                                </div><!--//section-block-->
                                <div id="install" class="section-block">
                                    <h3 class="block-title">Installation</h3>
                                    <div class="code-block">
                                        <ul class="list">
                                            <li>
                                                <p>From PyPi.</p>
                                                <ul class="list">
                                                    <li><p><code class="language-bash">pip install -i https://test.pypi.org/simple/ nl4dv==0.1.0</code></p></li>
                                                    <li><b>Stable release <i>coming soon!</i></b></li>
                                                </ul>
                                            </li>
                                            <li>
                                                <p>From the local distributable.</p>
                                                <ol class="list">
                                                    <li><p>Download one of (<a href="https://github.com/nl4dv/nl4dv/archive/0.1.0.tar.gz" target="_blank">.tar.gz</a>, <a href="https://github.com/nl4dv/nl4dv/archive/0.1.0.zip" target="_blank">.zip</a>)</p></li>
                                                    <li><p>Run <code class="language-bash">pip install nl4dv-0.1.0.{tar.gz, zip}</code></p></li>
                                                </ol>
                                            </li>
                                        </ul>
                                    </div><!--//code-block-->
                                </div><!--//section-block-->
                                <div id="sample-code" class="section-block">
                                    <h3 class="block-title">Sample Code</h3>
                                    <div class="row">
                                        <div class="col-md-12 col-12">
                                            <div class="code-block">
                                                <pre><code class="language-python">from nl4dv import NL4DV

# Initialize an instance of NL4DV
nl4dv_instance = NL4DV(data_url = "cars-w-year.csv")

# using Stanford Core NLP [DEPRECATED, easy to setup, slow in performance]
# replace with appropriate paths
dependency_parser_config = {"name": "corenlp", "model": "stanford-english-corenlp-2018-10-05-models.jar","parser": "stanford-parser.jar"}

# using Stanford Core NLP [recommended]
# replace with appropriate URL
# Note: The CoreNLPServer must be running at the below URL.
# dependency_parser_config = {"name": "corenlp-server", "url": "http://localhost:9000"}

# using Spacy
# replace with appropriate model
# dependency_parser_config = {"name": "spacy", "model": "en_core_web_sm", "parser": None}

# Set the Dependency Parser
nl4dv_instance.set_dependency_parser(config=dependency_parser_config)

# Define a query
query = "show me price of US cars with horsepower more than 200"

# Execute the query
output = nl4dv_instance.analyze_query(query)</code></pre>
                                            </div><!--//code-block-->
                                        </div>
                                    </div><!--//row-->
                                    <h3 class="block-title">Output</h3>
                                    <div class="row">
                                        <div class="col-md-12 col-12">
                                            <div class="code-block">
                                                <pre><code class="language-json">{
  "query": "show me price of US cars with horsepower more than 200",
  "dataset": "data/cars-w-year.csv",
  "visList": ["..."],
  "attributeMap": {"..."},
  "taskMap": {"..."},
  "followUpQuery": false,
  "contextObj": null
}</code></pre>
                                            </div><!--//code-block-->
                                        </div>
                                    </div><!--//row-->
                                    <h3 class="block-title">attributeMap (Attribute Map)</h3>
                                    <div class="row">
                                        <div class="col-md-12 col-12">
                                            <div class="code-block">
                                                <pre><code class="language-json">{
  "Horsepower": {
    "ambiguity": [],
    "isAmbiguous": false,
    "name": "Horsepower",
    "queryPhrase": [
      "horsepower"
    ],
    "inferenceType": "explicit"
  },
  "Origin": {
    "ambiguity": [],
    "isAmbiguous": false,
    "name": "Origin",
    "queryPhrase": [
      "us"
    ],
    "inferenceType": "implicit"
  }
}</code></pre>
                                            </div><!--//code-block-->
                                        </div>
                                    </div><!--//row-->
                                    <h3 class="block-title">taskMap (Task Map)</h3>
                                    <div class="row">
                                        <div class="col-md-12 col-12">
                                            <div class="code-block">
                                                <pre><code class="language-json">{
  "distribution": [
    {
      "attributes": [
        "Horsepower"
      ],
      "inferenceType": "implicit",
      "operator": null,
      "queryPhrase": [],
      "task": "distribution",
      "values": null
    }
  ],
  "filter": [
    {
      "attributes": [
        "Horsepower"
      ],
      "inferenceType": "explicit",
      "operator": "GT",
      "queryPhrase": "more",
      "task": "filter",
      "values": [
        200
      ]
    },
    {
      "attributes": [
        "Origin"
      ],
      "inferenceType": "explicit",
      "operator": "IN",
      "queryPhrase": [
        "us"
      ],
      "task": "filter",
      "values": [
        "US"
      ]
    }
  ]
}</code></pre>
                                            </div><!--//code-block-->
                                        </div>
                                    </div><!--//row-->
                                    <h3 class="block-title">visList (Visualization Recommendations)</h3>
                                    <div class="row">
                                        <div class="col-md-12 col-12">
                                            <div class="code-block">
                                                <pre><code class="language-json">[
  {
    "attributes": [
      "Horsepower"
    ],
    "queryPhrase": null,
    "tasks": [
      "filter",
      "distribution"
    ],
    "inferenceType": "implicit",
    "vlSpec": {
      "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
      "mark": {
        "tooltip": true,
        "type": "bar"
      },
      "encoding": {
        "x": {
          "field": "Horsepower",
          "type": "quantitative",
          "bin": true,
          "axis": {
            "format": "s"
          }
        },
        "y": {
          "field": "Horsepower",
          "type": "quantitative",
          "aggregate": "count",
          "axis": {
            "format": "s"
          }
        }
      },
      "transform": [
        {
          "filter": "lower(datum[\"Horsepower\"]) > 200.0"
        },
        {
          "filter": {
            "field": "Origin",
            "oneOf": [
              "US"
            ]
          }
        }
      ],
      "data": {
        "url": "./examples/assets/data/cars-w-year.csv",
        "format": {
          "type": "csv"
        }
      }
    }
  },
  {
    "attributes": [
      "Horsepower"
    ],
    "queryPhrase": null,
    "tasks": [
      "filter",
      "distribution"
    ],
    "inferenceType": "implicit",
    "vlSpec": {
      "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
      "mark": {
        "tooltip": true,
        "type": "tick"
      },
      "encoding": {
        "x": {
          "field": "Horsepower",
          "type": "quantitative",
          "axis": {
            "format": "s"
          }
        },
        "tooltip": {
          "field": "Model"
        }
      },
      "transform": [
        {
          "filter": "lower(datum[\"Horsepower\"]) > 200.0"
        },
        {
          "filter": {
            "field": "Origin",
            "oneOf": [
              "US"
            ]
          }
        }
      ],
      "data": {
        "url": "./examples/assets/data/cars-w-year.csv",
        "format": {
          "type": "csv"
        }
      }
    }
  }
]</code></pre>
                                            </div><!--//code-block-->
                                        </div>
                                    </div><!--//row-->
                                </div><!--//section-block-->
                            </section><!--//doc-section-->
                            <section id="api-reference" class="doc-section">
                                <h2 class="section-title">API Reference</h2>
                                <div class="section-block">
                                    <p>NL4DV exposes a simple, intuitive API for developers to consume.</p>
                                    <ul class="list">
                                        <li>
                                            <h4>class NL4DV.nl4dv</h4>
                                            <p>User facing class that takes in and processes users' natural language specifications (queries).</p>
                                        </li>
                                        <li>
                                            <h4>nl4dv.analyze_query()</h4>
                                            <p>Processes the user query and returns a JSON specification of attributes, tasks, and visualizations.</p>
                                            <ul class="list">
                                                <li><b>args</b>: query(str) - natural language query.</li>
                                                <li><b>return</b>: `dict()` containing attributeMap, taskMap, and visList.</li>
                                            </ul>
                                        </li>
                                        <li>
                                            <h4>nl4dv.render_vis()</h4>
                                            <p>Processes the user query and returns a VegaLite() object of the best, most relevant visualization.</p>
                                            <ul class="list">
                                                <li><b>args</b>: query(str) - natural language query.</li>
                                                <li><b>return</b>: `VegaLite` object</li>
                                            </ul>
                                        </li>
                                        <li>
                                            <h4>nl4dv.set_data()</h4>
                                            <p>Sets the dataset.</p>
                                            <ul class="list">
                                                <li><b>args</b>: data_url(str) - path to location of data file.</li>
                                                <li><b>return</b>: None</li>
                                            </ul>
                                        </li>
                                        <li>
                                            <h4>nl4dv.set_alias_map()</h4>
                                            <p>Sets the alias map</p>
                                            <ul class="list">
                                                <li><b>args</b>:
                                                    <ul>
                                                        <li>alias_map(dict) - `dict` of the alias map.</li>
                                                        <li>alias_url(str) - path to location of alias file.</li>
                                                    </ul>
                                                </li>
                                                <li><b>return</b>: None</li>
                                            </ul>
                                        </li>
                                        <li>
                                            <h4>nl4dv.set_thresholds()</h4>
                                            <p>Sets the string matching, domain word limit, other thresholds.</p>
                                            <ul class="list">
                                                <li><b>args</b>: thresholds (dict).</li>
                                                <li><b>return</b>: None</li>
                                            </ul>
                                        </li>
                                        <li>
                                            <h4>nl4dv.set_importance_scores()</h4>
                                            <p>Sets the Scoring Weights for the way attributes / tasks and visualizations are detected.</p>
                                            <ul class="list">
                                                <li><b>args</b>: scores (dict).</li>
                                                <li><b>return</b>: None</li>
                                            </ul>
                                        </li>
                                        <li>
                                            <h4>nl4dv.set_attribute_datatype()</h4>
                                            <p>Set (Override) the attribute datatypes (detected by NL4DV).</p>
                                            <ul class="list">
                                                <li><b>args</b>: attr_type_obj (dict).</li>
                                                <li><b>return</b>: None</li>
                                            </ul>
                                        </li>
                                        <li>
                                            <h4>nl4dv.set_dependency_parser()</h4>
                                            <p>Set the dependency parser to be used in the Tasks detector module.<br/>
                                                e.g. {"name": "stanford", "model": "stanford-english-corenlp-2018-10-05-models.jar","parser": "stanford-parser.jar")}</p>
                                            <ul class="list">
                                                <li><b>args</b>: config (dict)</li>
                                                <li><b>return</b>: None</li>
                                            </ul>
                                        </li>
                                        <li>
                                            <h4>nl4dv.set_reserve_words()</h4>
                                            <p>Set the vustom STOPWORDS that should NOT be removed from the query, as they might be present in the domain.<br/>
                                                e.g. `A` (an article) in a grades dataset</p>
                                            <ul class="list">
                                                <li><b>args</b>: reserve_words (list)</li>
                                                <li><b>return</b>: None</li>
                                            </ul>
                                        </li>
                                        <li>
                                            <h4>nl4dv.set_ignore_words()</h4>
                                            <p>Set the words that should be IGNORED in the query, i.e. NOT lead to the detection of attributes and tasks.<br/>
                                                e.g. `movie` in a movies dataset may lead to the detection of "Scary Movie".</p>
                                            <ul class="list">
                                                <li><b>args</b>: ignore_words (list)</li>
                                                <li><b>return</b>: None</li>
                                            </ul>
                                        </li>
                                        <li>
                                            <h4>nl4dv.set_label_attribute()</h4>
                                            <p>Set the Label attribute for the dataset, i.e. one that defines what the dataset is about.<br/>
                                                e.g. "Correlate horsepower and MPG for sports car models" should NOT apply an explicit attribute for models since there are two explicit attributes already present.</p>
                                            <ul class="list">
                                                <li><b>args</b>: label_attribute (str)</li>
                                                <li><b>return</b>: None</li>
                                            </ul>
                                        </li>
                                        <li>
                                            <h4>nl4dv.get_metadata()</h4>
                                            <p>Get the metadata object after processing the dataset.</p>
                                            <ul class="list">
                                                <li><b>args</b>: None</li>
                                                <li><b>return</b>: `dict()` containing the attributes their domains and ranges.</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </section>
                            <section id="test" class="doc-section">
                                <h2 class="section-title">Test (&beta;)</h2>
                                <div class="section-block">
                                    <div class="code-block">
                                        <pre><code class="language-bash">pytest --cov=nl4dv nl4dv/tests</code></pre>
                                    </div><!--//code-block-->
                                </div>
                            </section>
                            <section id="contribute" class="doc-section">
                                <h2 class="section-title">Build</h2>
                                <div class="section-block">
                                    <p>NL4DV can be installed as a Python package and imported in your own awesome applications!</p>
                                    <ol class="list">
                                        <li>
                                            <p>NL4DV is written in <a href="https://www.python.org/doc/versions/" target="_blank">Python 3</a>. Please ensure you have a Python 3 environment already installed.</p>
                                        </li>
                                        <li>
                                            <p>Clone this repository (master branch) and enter (`cd`) into it.</p>
                                        </li>
                                        <li>
                                            <p>Create a new <a href="https://pypi.org/project/virtualenv/" target="_blank">virtual environment</a> in python3 and activate it.</p>
                                            <p><code class="language-bash">virtualenv --python=python3 venv</code></p>
                                            <p><code class="language-bash">source venv/bin/activate</code></p>
                                        </li>
                                        <li>
                                            <p>Install dependencies.</p>
                                            <p><code class="language-bash">python -m pip install -r requirements.txt</code></p>
                                        </li>
                                        <li>
                                            <p>Create a Python distributable.</p>
                                            <p><code class="language-bash">python setup.py sdist</code></p>
                                        </li>
                                        <li>
                                            <p>This will create **nl4dv-0.0.9.tar.gz** inside `dist/`.</p>
                                        </li>
                                        <li>
                                            <p>Install this .tar.gz in your Python environment:</p>
                                            <p><code class="language-bash">python -m pip install &lt;PATH-TO-nl4dv-0.0.9.tar.gz&gt;</code></p>
                                        </li>
                                        <li>
                                            <p>Verify by opening your Python console and importing it:</p>
                                            <p>
                                                <code class="language-bash">$python</code><br/>
                                                <code class="language-bash">>>> from nl4dv import NL4DV</code>
                                            </p>
                                        </li>
                                        <li>
                                            Enjoy, NL4DV is now available as a Python package!
                                        </li>
                                    </ol>
                                </div>
                            </section>
                            <section id="contact" class="doc-section">
                                <h2 class="section-title">Contact Us</h2>
                                <div class="section-block">
                                    <p>
                                        Arpit Narechania: <b>arpitnarechania [at] gmail.com</b>
                                        <br/>
                                        Arjun Srinivasan: <b>arjun010 [at] gmail.com</b>
                                    </p>
                                </div>
                            </section>
                            <section id="license" class="doc-section">
                                <h2 class="section-title">License</h2>
                                <div class="section-block">
                                    <h3 class="block-title">MIT</h3>
                                </div>
                            </section>

                        </div><!--//content-inner-->
                    </div><!--//doc-content-->
                    <div class="doc-sidebar col-md-3 col-12 order-0 d-none d-md-flex">
                        <div id="doc-nav" class="doc-nav">
	                            <nav id="doc-menu" class="nav doc-menu flex-column sticky">
	                                <a class="nav-link scrollto" href="#setup">Setup</a>
                                    <nav class="doc-sub-menu nav flex-column">
    	                                <a class="nav-link scrollto" href="#prerequisites">Prerequisites</a>
                                        <a class="nav-link scrollto" href="#install">Installation</a>
                                        <a class="nav-link scrollto" href="#sample-code">Sample Code</a>
                                    </nav><!--//nav-->
	                                <a class="nav-link scrollto" href="#api-reference">API Reference</a>
	                                <a class="nav-link scrollto" href="#test">Test</a>
	                                <a class="nav-link scrollto" href="#contribute">Build</a>
	                                <a class="nav-link scrollto" href="#contact">Contact Us</a>
	                                <a class="nav-link scrollto" href="#license">License</a>
	                            </nav><!--//doc-menu-->
	                        
                        </div>
                    </div><!--//doc-sidebar-->
                </div><!--//doc-body-->              
            </div><!--//container-->
        </div><!--//doc-wrapper-->

    </div><!--//page-wrapper-->
    
    <footer id="footer" class="footer text-center">
        <div class="container">
            <p>
                NL4DV: Natural Language toolkit for Data Visualization.<br/>
                <small>Georgia Institute of Technology&nbsp;&copy;&nbsp;2020</small>
            </p>
            <!--/* This template is free as long as you keep the footer attribution link. If you'd like to use the template without the attribution link, you can buy the commercial license via our website: themes.3rdwavemedia.com Thank you for your support. :) */-->
            <small class="copyright">Designed with <i class="fas fa-heart"></i> by <a href="https://themes.3rdwavemedia.com/" target="_blank">Xiaoying Riley</a> for developers</small>
            
        </div><!--//container-->
    </footer><!--//footer-->
    
     
    <!-- Main Javascript -->          
    <script type="text/javascript" src="./assets/plugins/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="./assets/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="./assets/plugins/prism/prism.js"></script>
    <script type="text/javascript" src="./assets/plugins/jquery-scrollTo/jquery.scrollTo.min.js"></script>
    <script type="text/javascript" src="./assets/plugins/lightbox/dist/ekko-lightbox.min.js"></script>
    <script type="text/javascript" src="./assets/plugins/stickyfill/dist/stickyfill.min.js"></script>
    <script type="text/javascript" src="./assets/js/main.js"></script>

</body>
</html> 

